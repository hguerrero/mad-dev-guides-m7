= 2. Application Development - 30 minutes
:imagesdir: ../assets/images

== Goals of this lab

The goal of this lab is to learn how developers can build, deploy and manage applications using Red Hat Developer Hub. Red Hat Developer Hub is already configured with OpenShift Pipelines and Gitea.

You will:

* Create a component for a NodeJS Application using existing templates 
* Overview of application details, exploring topology view, pipelines and github issues 
* Fix a github issue using Red Hat Dev Spaces with Explore software catalog to integrate with other microservices (openAPI) 
* Review Metrics

=== 2.1 Globexâ€™s Digital Transformation Journey
Globex, a fictitious retail company, has completed the modernization of their existing retail e-commerce web application as part of their modernization journey. A schematic overview of the current state of the application as show below:

image::intro/globex-phase1.png[width=60%]

As part of the modernization process, Globex is looking to accelerate the software development lifecycle to reduce time to market with best practices. The first step is to build and deploy the NodeJS application to OpenShift.

== 2.2. Build and Deploy your application with one click

Yes, with only one click, you can build and deploy your application in OpenShift.

Follow the steps below:

1. Login in Red Hat Developer Hub (if disconnected from the previous section)
2. Click the Create option from the Red Hat Developer Hub menu at your left (Step 1 in the image).
3. Review the available templates:

image::appdev/templates.png[width=100%]

4. Select the template "XX NodeJS" by clicking on *CHOOSE* (Step 2 in the image).:
5. Follow the example below to complete the required information:

image::appdev/component_info.png[width=100%]

**Notes**: 
Enter your *username* for the *namespace* and *user:<REPLACE_WITH_YOUR_USER>* for the *owner* input. In each step click on the Next button.

6. Click on the *Create* button.
7. Look at the task activity on the same screen. You should see all the activities completed successfully.

image::appdev/task-activity.png[width=100%]

You will explore the three elements below.

== 2.3. Explore the generated elements

=== 2.3.1 Review Source Code Repository
Click on *Source Code Repository*. It will redirect you to the Gitea repository with the frontend application.

=== 2.3.2 Review the Pipeline created
Click on *Pipeline status* . It will redirect you to the OpenShift web console under the Pipeline section.

=== 2.3.3 Open Component in catalog
Click on *Open Component in catalog*. It will redirect to the component overview page. 

image::appdev/rhdevhub_component_overview.png[width=100%]


== 2.4 Explore the component view

=== 2.4.1 Explore the topology view
1. Click on *TOPOLOGY*. You will be able to see all applications deployed in the topology view. 

2. Click on the *blue circle*. 
3. A new window opens at your right, and you can see the Pod (application running) and access *Resources* and *Details* of your application. 

image::appdev/rhdevhub_component_detail.png[width=100%]

=== 2.5 Metrics

Interactions with git will create specific metrics on the Gitea stadistics. 
image::appdev/metrics.png[width=80%]

In the next steps we will fix an issue affecting this metrics.

=== 2.6 Fix an issue reported about the application
Red Hat Developer Hub is a single pane of glass that allows you to access all the tools and information for your app from one single place. 

1. Look at the Git issues by clicking on *ISSUES*. 
2. You will be able to see any GitHub issues associated with the application. 

There is an issue to be fixed:

image::appdev/rhdevhub_git_issue.png[width=80%]

3. From the Red Hat Developer Hub component view access OpenShift Dev Spaces to make the necessary source code changes.

image::appdev/rhdevhub_devspaces.png[width=80%]

4. Log in into OpenShift Dev Spaces:

4.1 Click on the *Login* button:

image::appdev/rhdevhub_devspaces_login.png[width=80%]

4.2 Select gitea option:

4.3 Authorize the access by click on "Allow selected permissions"

image::appdev/rhdevhub_devspaces_authorize.png[width=80%]

4.4 Authorize the user access. Follow the next steps to continue the authorization of OpenShift Dev Spaces into Gitea.

4.5 Wait for your Dev Spaces workspace to load. This can take a few seconds. You will see a loading screen while the workspace is being provisioned, where Dev Spaces is creating a workspace based on a default devfile, which can be customized to include your tools and configuration.

4.6 Confirm the access by clicking "Yes, I trust the authors" to open the code editor with your source code repository.

image::appdev/rhdevhub_devspaces_authorize_author.png[width=80%]

4.7 Look for the file: TBD in the source three of the IDE.


//TBD add code snippet showing code changes needed.

4.8 Setup Red Hat OpenShift Dev Spaces.
Follow the 

image::appdev/rhdevhub_devspaces_authorize_config.png[width=80%]

4.8 Commit your source code changes.

4.9 Sync changes to source code.

5. Explore Pipelines from Red Hat Developer Hub.

6. Explore the metrics.



## Congratulations!

You have successfully xx this app and now ready to deploy to OpenShift, *congratulations!*



